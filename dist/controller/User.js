sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox","sap/m/MessageToast"],function(i,t,e){"use strict";return i.extend("com.digiArtitus.controller.User",{constructor:function(i){this._oInstance=i;this._oView=i.getView()},checkForLogin:function(){return new Promise(function(i,t){firebase.auth().onAuthStateChanged(function(t){var e=false;if(t){com.digiArtitus.userId=t.uid}else{e=!e;if(this._oView.byId("html")){$.get("view/login.html",function(i){this._oView.byId("html").setContent(i)}.bind(this)).then(this._loadEventListners.bind(this))}}this._oView.byId("login-page").setVisible(e);this._oView.byId("admin-page").setVisible(!e);i()}.bind(this))}.bind(this))},loadUserData:function(){return new Promise(function(i,t){var e=function(t){var e=t.data();com.digiArtitus.userName=e.USER_NAME;com.digiArtitus.userPic=e.USER_PIC;com.digiArtitus.role=e.USER_ROLE;com.digiArtitus.companyCode=e.USER_COMPANY_CODE;com.digiArtitus.billingCity=e.BILLING_CITY;com.digiArtitus.billingCountry=e.BILLING_COUNTRY;com.digiArtitus.billingStreet=e.BILLING_STREET;com.digiArtitus.billingStreetNo=e.BILLING_STREET_NO;com.digiArtitus.billingZipcode=e.BILLING_ZIPCODE;com.digiArtitus.billingDeliveryCharge=e.BILLING_DELIVERY_CHARGE;com.digiArtitus.billingDeliveryCheck=e.BILLING_DELIVERY_CHECK;i()};firebase.firestore().collection("users").doc(com.digiArtitus.userId).get().then(e)})},_loadEventListners:function(){$.sap.delayedCall(200,this,function(){$("#admin-btn-id").click(function(){$("#admin-btn-id").addClass("btn-selected");$("#manager-btn-id").removeClass("btn-selected");this.ADMIN_LOGIN=!this.ADMIN_LOGIN}.bind(this));$("#manager-btn-id").click(function(){$("#manager-btn-id").addClass("btn-selected");$("#admin-btn-id").removeClass("btn-selected");this.ADMIN_LOGIN=!this.ADMIN_LOGIN}.bind(this));$("#email").click(function(){$("#email").addClass("input-border-active");$("#password").removeClass("input-border-active")}.bind(this));$("#email").focus();$("#password").click(function(){$("#password").addClass("input-border-active");$("#email").removeClass("input-border-active")}.bind(this));$("#reset").click(function(){$("#email").val("");$("#password").val("");$("#email").click();$("#email").focus()}.bind(this));$("#submit").click(function(){this.USER_NAME=$("#email").val().trim();if(this.USER_NAME===""||this.USER_NAME===null){e.show("Enter valid phone number or email id");return}this.PASSWORD=$("#password").val().trim();if(this.PASSWORD===""||this.PASSWORD===null){e.show("Enter valid password");return}var i=this;firebase.auth().signInWithEmailAndPassword(this.USER_NAME,this.PASSWORD).catch(function(e){var s=e.message;var n=!!i.getView().$().closest(".sapUiSizeCompact").length;t.error(s,{styleClass:n?"sapUiSizeCompact":""})})}.bind(this));$(".forget-password").click(function(){e.show("Forget password")})})}})});