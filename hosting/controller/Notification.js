sap.ui.define(["sap/ui/base/Object","sap/m/MessageBox","sap/m/MessageToast"],function(i,t,o){"use strict";return i.extend("com.digiArtitus.controller.Notification",{constructor:function(i){this._oInstance=i;this._oView=i.getView();this.oViewModel=this._oView.getModel("oViewModel")},liveNotificationUpdates:function(){var i=function(i){var t=this.oViewModel.getData();var o=[];i.forEach(function(i){o.push({DOC_REF:i.ref,TEXT:i.data().TEXT,TIME_STAMP:moment(i.data().TIME_STAMP).format("Do MMM YYYY")})});t.NOTIFICATIONS=o;this.oViewModel.refresh()}.bind(this);this._oInstance.notificationsUnsubscribe=com.digiArtitus.FirestoreInstance().collection("DATABASE").doc(com.digiArtitus.companyCode).collection("NOTIFICATIONS").onSnapshot(i)},_notificationDialog:function(){if(!this.notificationDialog){var i=this._oView;this.notificationDialog=sap.ui.xmlfragment(i.getId(),"com.digiArtitus.fragment.notification-popover",this);i.addDependent(this.notificationDialog);jQuery.sap.syncStyleClass("sapUiSizeCompact",i,this.notificationDialog)}return this.notificationDialog},onNotificationPress:function(i){var t=i.getSource();jQuery.sap.delayedCall(0,this,function(){this._notificationDialog().openBy(t)})},handleClosePress:function(){this._notificationDialog().close()}})});